<style>
    .fdb-block {
        border-bottom: solid 1px #EEE;
    }
</style>

<section class="fdb-block fdb-padding-bottom pb-0" style="background-image: url(imgs/bg_2.svg);">
    <div class="container animated bounceInDown" style="background-color: transparent">
        <nav class="navbar navbar-expand-md">
            <a class="navbar-brand" href="/">
                Syzible
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-main"
                    aria-controls="navbar-main" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbar-main">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/apps">Apps</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/enquiries">Enquiries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/developers">Developers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/thesis">Thesis</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <div class="container">
        <div class="row text-center justify-content-center">
            <div class="col-12 col-md-8 col-lg-7">
                <h1>Contact Us</h1>
                <p class="text-h3">For business enquiries, please fill in the form below and we'll get back to you
                    soon.</p>
            </div>
        </div>
        <div class="row-50">
        </div>
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-7">
                <div class="row">
                    <div class="col">
                        <label>Email Address</label>
                        <input type="text" class="form-control" id="#form-email-address">
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col">
                        <label>Subject</label>
                        <input type="email" class="form-control" id="#form-subject">
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col">
                        <label>What can we do for you?</label>
                        <textarea class="form-control" name="message" rows="3" id="#form-message"></textarea>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col g-recaptcha" data-sitekey="6LfAYDkUAAAAAJn1MG_D7IXlDYC7o0p2QFAL9lAM"></div>
                </div>
                <div class="row mt-4">
                    <div class="col text-right">
                        <button type="submit" class="btn" id="#form-submit">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row-100"></div>
    </div>
</section>

<script src='https://www.google.com/recaptcha/api.js'></script>
<script>
    function submitForm() {
        let email = document.getElementById("#form-email-address").value;
        let subject = document.getElementById("#form-subject").value;
        let message = document.getElementById("#form-message").value;
        let userIp = {{user_ip}};

        if (!isEmail(email))
            return alert("Please enter a correct email");

        if (!containsText(subject))
            return alert("Please enter a subject");

        if (!containsText((message)))
            return alert("Please enter a message");

        // all g -- empty fields
        validateEnquiry(email, sub, message, userIp);
    }

    function validateEnquiry(email, subject, message, userIp) {
        fetch('https://www.syzible.com/submit-enquiry', {
            method: 'post',
            headers: {
                'Accept': 'application/json, text/plain, */*',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                "user_ip": userIp,
                "email": email,
                "subject": subject,
                "message": message

            })
        })
                .then(res => res.json())
                .then(res => {
                    if (res["success"]) {
                        alert("Thanks for your enquiry! :)");
                        document.getElementById("#form-email-address").value = "";
                        document.getElementById("#form-subject").value = "";
                        document.getElementById("#form-message").value = "";
                    } else {
                        alert("Error in submitting captcha");
                    }
                });
    }

    function containsText(source) {
        return source.length > 0;
    }

    function isEmail(email) {
        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }

    document.getElementById("#form-submit").addEventListener("click", function () {
        submitForm();
    });

</script>

